@if (isVisible()) {
  <section class="popup-container" (click)="onBackdropClick($event)">
    <dialog class="add-teacher-popup" open>
      <header>
        <h2>Add Teacher</h2>
        <span class="cross" (click)="closeModal()">x</span>
      </header>

      <form class="dialog-main" (ngSubmit)="onSubmit($event)" #teacherForm="ngForm">

        @if (validationErrors().length > 0) {
          <div class="validation-errors">
            <h3>Please fix the following errors:</h3>
            <ul>
              @for (error of validationErrors(); track error.field) {
                <li>{{ error.message }}</li>
              }
            </ul>
          </div>
        }
        <fieldset>
          <label for="addName">Full Name</label>
          <input
            placeholder="Enter full name"
            type="text"
            id="addName"
            name="full_name"
            [(ngModel)]="teacherData.full_name"
            [class.error]="getFieldError('full_name')"
            required
          />
          @if (getFieldError('full_name')) {
            <span class="error-message">{{ getFieldError('full_name') }}</span>
          }
        </fieldset>

        <fieldset>
          <label for="addSpeciality">Course</label>
          <select id="addSpeciality" name="course" [(ngModel)]="teacherData.course" [class.error]="getFieldError('course')" required>
            <option value="">Select a course</option>
            <option value="Mathematics">Mathematics</option>
            <option value="Physics">Physics</option>
            <option value="Vocal">Vocal</option>
            <option value="Chemistry">Chemistry</option>
            <option value="Chess">Chess</option>
            <option value="Computer Science">Computer Science</option>
            <option value="Biology">Biology</option>
            <option value="Medicine">Medicine</option>
            <option value="Art">Art</option>
            <option value="English">English</option>
            <option value="Statistics">Statistics</option>
            <option value="Dancing">Dancing</option>
            <option value="Law">Law</option>
          </select>
          @if (getFieldError('course')) {
            <span class="error-message">{{ getFieldError('course') }}</span>
          }
        </fieldset>

        <div class="two-columns">
          <fieldset class="half-width">
            <label for="addCountry">Country</label>
            <select id="addCountry" name="country" [(ngModel)]="teacherData.country" [class.error]="getFieldError('country')" required>
              <option value="">Select a country</option>
              <option value="Ukraine">Ukraine</option>
              <option value="India">India</option>
              <option value="UK">UK</option>
              <option value="Belarus">Belarus</option>
              <option value="Denmark">Denmark</option>
              <option value="Poland">Poland</option>
              <option value="Belgium">Belgium</option>
              <option value="China">China</option>
              <option value="Vietnam">Vietnam</option>
              <option value="USA">USA</option>
              <option value="Ireland">Ireland</option>
              <option value="England">England</option>
              <option value="Austria">Austria</option>
              <option value="Italy">Italy</option>
              <option value="Netherlands">Netherlands</option>
              <option value="Scotland">Scotland</option>
              <option value="France">France</option>
            </select>
            @if (getFieldError('country')) {
              <span class="error-message">{{ getFieldError('country') }}</span>
            }
          </fieldset>

          <fieldset class="half-width">
            <label for="addCity">City</label>
            <input type="text" id="addCity" name="city" [(ngModel)]="teacherData.city" [class.error]="getFieldError('city')" />
            @if (getFieldError('city')) {
              <span class="error-message">{{ getFieldError('city') }}</span>
            }
          </fieldset>
        </div>

        <div class="two-columns">
          <fieldset class="half-width">
            <label for="addEmail">Email</label>
            <input type="email" id="addEmail" name="email" [(ngModel)]="teacherData.email" [class.error]="getFieldError('email')" required />
            @if (getFieldError('email')) {
              <span class="error-message">{{ getFieldError('email') }}</span>
            }
          </fieldset>

          <fieldset class="half-width">
            <label for="addPhone">Phone</label>
            <input type="tel" id="addPhone" name="phone" [(ngModel)]="teacherData.phone" [class.error]="getFieldError('phone')" required />
            @if (getFieldError('phone')) {
              <span class="error-message">{{ getFieldError('phone') }}</span>
            }
          </fieldset>
        </div>

        <fieldset class="half-width">
          <label for="addAge">Age</label>
          <input type="number" id="addAge" name="age" [(ngModel)]="teacherData.age" min="18" max="100" [class.error]="getFieldError('age')" required />
          @if (getFieldError('age')) {
            <span class="error-message">{{ getFieldError('age') }}</span>
          }
        </fieldset>

        <div class="two-columns inline-inputs">
          <legend>Sex</legend>
          <label for="male">Male</label>
          <input type="radio" id="male" name="gender" value="Male" [(ngModel)]="teacherData.gender" />
          <label for="female">Female</label>
          <input type="radio" id="female" name="gender" value="Female" [(ngModel)]="teacherData.gender" />
          @if (getFieldError('gender')) {
            <span class="error-message">{{ getFieldError('gender') }}</span>
          }
        </div>

        <fieldset>
          <label for="addPhotoUrl">Photo URL (optional)</label>
          <input type="url" id="addPhotoUrl" name="picture_large" [(ngModel)]="teacherData.picture_large" />
        </fieldset>

        <fieldset>
          <label for="addNote">Note (optional)</label>
          <textarea id="addNote" name="note" [(ngModel)]="teacherData.note" rows="3" [class.error]="getFieldError('note')"></textarea>
          @if (getFieldError('note')) {
            <span class="error-message">{{ getFieldError('note') }}</span>
          }
        </fieldset>

        <button type="submit">Add Teacher</button>
      </form>
    </dialog>
  </section>
}
